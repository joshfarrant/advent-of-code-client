{
  "meta": {
    "createdAt": 1764669220298
  },
  "puzzle": {
    "day": 2,
    "title": "Gift Shop"
  },
  "notes": "",
  "solutions": {
    "part1": "const parseInput = (str: string) =>\n  str.split(',').map(x => x.split('-')) as [string, string][];\n\nconst splitInHalf = (str: string) => {\n  const mid = str.length / 2;\n  return [str.slice(0, mid), str.slice(mid)];\n};\n\nconst isInvalidId = (id: string) => {\n  if (id.length % 2 !== 0) return false;\n  const [first, second] = splitInHalf(id);\n  return first === second;\n};\n\nconst getInvalidIds = (start: string, end: string) => {\n  const invalidIds: number[] = [];\n\n  const startNum = Number(start);\n  const endNum = Number(end);\n\n  for (let id = startNum; id <= endNum; id++) {\n    if (isInvalidId(String(id))) invalidIds.push(id);\n  }\n\n  return invalidIds;\n};\n\nconst sum = (a: number, b: number) => a + b;\n\nexport default (input: string): number => {\n  const ranges = parseInput(input);\n\n  return ranges.flatMap(range => getInvalidIds(...range)).reduce(sum);\n};\n",
    "part2": "const parseInput = (str: string) =>\n  str.split(',').map(x => x.split('-')) as [string, string][];\n\nconst chunk = (str: string, size: number) =>\n  str.match(new RegExp('.{1,' + size + '}', 'g')) as string[];\n\nconst allEqual = (arr: unknown[]) => arr.every(x => x === arr[0]);\n\nconst sum = (a: number, b: number) => a + b;\n\nconst factorMap = new Map<number, number[]>();\nconst getFactors = (num: number): number[] => {\n  if (factorMap.has(num)) return factorMap.get(num)!;\n\n  const factors = [];\n\n  for (let i = 1; i <= num / 2; i++) {\n    if (num % i === 0) {\n      factors.push(i);\n    }\n  }\n\n  factorMap.set(num, factors);\n\n  return factors;\n};\n\nconst isInvalidId = (id: string) => {\n  const factors = getFactors(id.length);\n\n  return factors.some(factor => {\n    const chunks = chunk(id, factor);\n    return allEqual(chunks);\n  });\n};\n\nconst sumInvalidIds = (start: string, end: string) => {\n  let total = 0;\n\n  const startNum = Number(start);\n  const endNum = Number(end);\n\n  for (let id = startNum; id <= endNum; id++) {\n    if (isInvalidId(String(id))) {\n      total += id;\n    }\n  }\n\n  return total;\n};\n\nexport default (input: string) =>\n  parseInput(input).reduce((sum, range) => sum + sumInvalidIds(...range), 0);\n"
  }
}